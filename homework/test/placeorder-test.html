<!doctype html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<title>Place Order Test Page</title>

		<style>

		</style>
	
	</head>
	<body>
		<h1>Place Order Test Page</h1>

		<form action="../placeorder.php" method="POST" name="order">
			<input type="hidden" name="cart">
		</form>

		<button class="button-place-order">Place Order</button>
		<button class="button-place-bad-order">Place Bad Order</button>

		<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>

		<script>
			$(function(){

				var cart = {
					name: "Mickey Mouse",
					address1: "1 UW Way",
					address2: "Apt 422",
					zip: "98999",
					phone: "206-999-9999",
					nextUrl: document.URL,
					nextText: 'Me Want More Pizza!',
					items: [
						{
							type: "pizza",
							name: "Duck, Duck, Goose",
							size: "medium"
						},
						{
							type: "drink",
							name: "Irn Bru"
						},
						{
							type: "dessert",
							name: "Lemon Sorbet"
						}
					]
				};

				var badCart = {
					name: "Mickey Mouse",
					address1: "1 UW Way",
					address2: "Apt 422",
					zip: "98999",
					phone: "206-999-9999",
					nextUrl: "&lt;script&gt;alert(&quot;if you see this, you need to html encode!&quot;)&lt;/script&gt;",
					items: [
						{
							type: "pizza",
							name: "Duck, Duck, Goose",
							size: "medium"
						},
						{
							type: "drink",
							name: "Irn Bru"
						},
						{
							type: "dessert",
							name: "Lemon Sorbet"
						}
					]
				};

				$('.button-place-order').click(function(){
					document.forms[0].cart.value = JSON.stringify(cart);
					document.forms[0].submit();
				});

				$('.button-place-bad-order').click(function(){
					document.forms[0].cart.value = JSON.stringify(badCart);
					document.forms[0].submit();
				});

			});

		</script>
		
	</body>
</html>